version: '3'
services:
  mongodb:
    container_name: mongodb
    build: 
      context: ./
      dockerfile: DockerfileMongo
    image: mongodb
    volumes:
      - mongodbvolume:/data/db
    ports:
    - "27017:27017"
    networks:
    - brIPS
  storage:
    container_name: storage
    build: 
      context: ./
      dockerfile: DockerfileStorage
    image: storage_config
    ports:
    - "8001:8001"
    depends_on:
    - mongodb
    networks:
    - brIPS
  msno:
    container_name: msno
    build: 
      context: ./
      dockerfile: DockerfileMSNO
    image: msno_config
    ports:
    - "8000:8000"
    depends_on:
    - storage
    networks:
    - brIPS
volumes:
  mongodbvolume:
    driver: local
networks:
  brIPS:
    external:
      name: brIPS
